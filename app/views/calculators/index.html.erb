<% content_for :title, "Bitcoin Calculator" %>

<section class="calculator">
  <div class="calculator__form">
    <h1>Bitcoin Calculator</h1>
    <p>Paste a private key (hex or WIF) or a public key (compressed or uncompressed) to derive related data.</p>

    <%= form_with url: calculators_path, scope: :calculator, method: :post, class: "calculator__form__inner", local: true do |form| %>
      <div class="field">
        <%= form.label :input, "Input" %>
        <%= form.text_area :input, value: @input, rows: 6, placeholder: "Enter hex private key, WIF, or public key" %>
      </div>

      <div class="actions">
        <%= form.submit "Calculate" %>
      </div>
    <% end %>
  </div>

  <% if defined?(@result) && @result.present? %>
    <div class="calculator__results">
      <h2>Results</h2>

      <% if @result.errors.present? %>
        <div class="calculator__results__errors">
          <h3>Errors</h3>
          <ul>
            <% @result.errors.each do |error| %>
              <li><%= error %></li>
            <% end %>
          </ul>
        </div>
      <% else %>
        <dl>
          <dt>Input Type</dt>
          <dd><%= @result.input_type.to_s.humanize %></dd>

          <% @result.data.each do |label, value| %>
            <dt><%= label.to_s.humanize %></dt>
            <dd><code><%= value %></code></dd>
          <% end %>
        </dl>
      <% end %>
    </div>
  <% end %>
</section>
