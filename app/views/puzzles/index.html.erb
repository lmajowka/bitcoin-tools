<section class="page-intro" data-animate>
  <h1>Bitcoin Puzzle Collection</h1>
  <p> Curated list of Bitcoin brainteasers and cryptographic challenges.</p>
</section>

<% if flash[:alert] %>
  <div class="notice notice--alert" data-animate="delayed"><%= flash[:alert] %></div>
<% end %>

<% if @puzzles.present? %>
  <section class="puzzle-list" data-controller="animations">
    <header class="puzzle-list__header" data-animate="delayed">
      <h2>Unsolved Transactions</h2>
    </header>

    <div class="puzzle-table-wrapper" data-animate="late">
      <table class="puzzle-table">
        <thead>
          <tr>
            <th scope="col">Puzzle</th>
            <th scope="col">Key Range (Hex)</th>
            <th scope="col">Reward (BTC)</th>
            <th scope="col">Address</th>
            <th scope="col">Hash160</th>
          </tr>
        </thead>
        <tbody>
          <% @puzzles.each do |puzzle| %>
            <tr>
              <th scope="row">#<%= puzzle[:bits] %></th>
              <td><code><%= puzzle[:range].first %></code> – <code><%= puzzle[:range].last %></code></td>
              <td>₿ <%= puzzle[:btc_value] %></td>
              <td>
                <% if puzzle[:address].present? %>
                  <%= link_to puzzle[:address], "https://mempool.space/address/#{puzzle[:address]}", target: "_blank", rel: "noopener", data: { tooltip: "View on Mempool" } %>
                <% else %>
                  <span class="muted">n/a</span>
                <% end %>
              </td>
              <td>
                <% if puzzle[:hash160].present? %>
                  <code data-animations-target="copyable" data-tooltip="Click to copy"><%= puzzle[:hash160] %></code>
                <% else %>
                  <span class="muted">n/a</span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </section>
<% else %>
  <p class="muted">No puzzles available at the moment.</p>
<% end %>
